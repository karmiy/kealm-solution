# Performance Metrics

性能指标

## Overview

2025 已经不推荐用 **performance.timing** 计算性能指标了

被淘汰的指标：

- FMP: 废弃
- Speed Index: 工具级指标，不能通过 JS 直接测量，只能通过 Lighthouse
- TTI: 被 INP 替代，难以定义“交互完成时间”，INP 更稳定

推荐使用的性能指标（2025 主流）:

| 缩写     | 全称                                     | 作用                       | 是否可用 JS 采集 |
| -------- | ---------------------------------------- | -------------------------- | ---------------- |
| **FCP**  | First Contentful Paint                   | 首次绘制文本/图像          | ✅               |
| **LCP**  | Largest Contentful Paint                 | 最大内容绘制时间           | ✅               |
| **FID**  | First Input Delay                        | 首次用户交互延迟           | ✅               |
| **CLS**  | Cumulative Layout Shift                  | 累积布局偏移               | ✅               |
| **TTFB** | Time to First Byte                       | 首字节接收时间（服务响应） | ✅               |
| **INP**  | Interaction to Next Paint（🔥 替代 FID） | 任意用户交互响应延迟       | ✅               |

注：

- FCP: 用户多久能看到页面内容
- LCP: 用户视口中最大的可见内容元素（如图片或块级文本）被完全渲染到屏幕上的时间点，不是整页加载完
  - 它只关注主视图中最大可见元素，比如你页面中最明显的标题、图片、主区域等。
  - 它不等页面其他小元素或异步加载的模块全部加载完才算
  - 浏览器会动态判断
  - LCP 的设计目的不是衡量“页面是否加载完”，而是衡量“用户能看到的主要内容何时展示出来”
    - 示例: 想象一个页面，LOGO 很小，不是 LCP 候选；h1 出现了，很大 → 暂时认为它是 LCP；加载完成，尺寸更大 → 被记录为最终 LCP
    - 理解: 此时用户其实已经能理解页面主要内容，不需要等底部评论区、广告位、分页按钮加载完，这是 “感知完成” 而非 “技术完成”，用户什么时候觉得页面有响应、主要内容可读了
- CLS: 页面可见元素在加载过程中发生了多少意外的视觉移动，可以想象一个场景：某个元素一开始在页面位置 A，但因为上面的内容加载出来了，就被挤下去了，这种用户体验是比较差的

## Solution and Demo

推荐使用 Google 的 **web-vitals** 实现（见 demo-core-web-vitals 项目）
